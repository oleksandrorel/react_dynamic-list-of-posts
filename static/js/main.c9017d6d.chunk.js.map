{"version":3,"sources":["components/PostsList/PostsList.jsx","components/NewCommentForm/NewCommentForm.jsx","api/api.js","api/comments.js","api/postDetails.js","components/Loader/Loader.jsx","components/PostDetails/PostDetails.jsx","api/posts.js","App.jsx","index.js"],"names":["PostsList","posts","postId","setPostId","className","map","post","key","id","userId","title","type","onClick","NewCommentForm","addComment","useState","commentName","setCommentName","commentEmail","setCommentEmail","commentBody","setCommentBody","validate","setValidate","onSubmit","e","preventDefault","trim","name","value","placeholder","onChange","target","BASE_URL","request","url","options","fetch","then","result","json","getPostComments","data","filter","comment","removePostComments","commentId","method","addNewComment","email","body","headers","JSON","stringify","getPostDetails","Loader","PostDetails","postDetail","setPostDetail","postComments","setPostComments","showComments","setShowComments","loadingPost","setLoadingPost","loadingComment","setLoadingComment","loadPostDetails","useCallback","a","loadedPostDetails","loadPostComments","loadedPostComments","useEffect","removeComment","length","prev","getAllPosts","getUserPosts","App","setPosts","userSelected","setUser","selectedPostId","setSelectedPostId","loading","setLoading","loadUserPosts","loadAllPosts","loadedPosts","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c9017d6d.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport './PostsList.scss';\n\nexport const PostsList = ({ posts, postId, setPostId }) => {\n  const clickHandler = (id) => {\n    if (postId === id) {\n      setPostId(0);\n\n      return;\n    }\n\n    setPostId(id);\n  };\n\n  return (\n    <div className=\"PostsList\">\n      <h2>Posts:</h2>\n\n      <ul className=\"PostsList__list\">\n        {\n          posts.map(post => (\n            <li className=\"PostsList__item\" key={post.id}>\n              <div>\n                <b>\n                  {`[User #${post.userId}]: `}\n                </b>\n                {post.title}\n              </div>\n              <button\n                type=\"button\"\n                className=\"PostsList__button button\"\n                onClick={() => {\n                  clickHandler(post.id);\n                }}\n              >\n                {postId === post.id\n                  ? 'Close'\n                  : 'Open'\n                }\n              </button>\n            </li>\n          ))}\n      </ul>\n    </div>\n  );\n};\n\nPostsList.propTypes = {\n  posts: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.number,\n    PostId: PropTypes.number,\n    title: PropTypes.string,\n    userId: PropTypes.number,\n  })).isRequired,\n  postId: PropTypes.number.isRequired,\n  setPostId: PropTypes.func.isRequired,\n};\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport './NewCommentForm.scss';\n\nexport const NewCommentForm = ({ addComment }) => {\n  const [commentName, setCommentName] = useState('');\n  const [commentEmail, setCommentEmail] = useState('');\n  const [commentBody, setCommentBody] = useState('');\n  const [validate, setValidate] = useState(true);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (!commentName.trim() || !commentEmail.trim() || !commentBody.trim()) {\n      setValidate(false);\n\n      return;\n    }\n\n    addComment(commentName, commentEmail, commentBody);\n    setCommentName('');\n    setCommentEmail('');\n    setCommentBody('');\n    setValidate(true);\n  };\n\n  return (\n    <form\n      className=\"NewCommentForm\"\n      onSubmit={handleSubmit}\n    >\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          value={commentName}\n          placeholder=\"Your name\"\n          className=\"NewCommentForm__input\"\n          onChange={(e) => {\n            setCommentName(e.target.value);\n          }}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"email\"\n          value={commentEmail}\n          placeholder=\"Your email\"\n          className=\"NewCommentForm__input\"\n          onChange={(e) => {\n            setCommentEmail(e.target.value);\n          }}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          value={commentBody}\n          placeholder=\"Type comment here\"\n          className=\"NewCommentForm__input\"\n          onChange={(e) => {\n            setCommentBody(e.target.value);\n          }}\n        />\n      </div>\n\n      {!validate && (\n        <p className=\"NewCommentForm__error\">\n          Form should not have empty fields.\n        </p>\n      )}\n\n      <button\n        type=\"submit\"\n        className=\"NewCommentForm__submit-button button\"\n      >\n        Add a comment\n      </button>\n    </form>\n  );\n};\n\nNewCommentForm.propTypes = {\n  addComment: PropTypes.func.isRequired,\n};\n","export const BASE_URL = 'https://mate-api.herokuapp.com';\n\nexport const request = (url, options) => fetch(url, options)\n  .then(result => result.json());\n","import { BASE_URL, request } from './api';\n\nexport const getPostComments = postId => request(\n  `${BASE_URL}/comments`,\n)\n  .then(result => result.data.filter(comment => comment.postId === postId));\n\nexport const removePostComments = commentId => request(\n  `${BASE_URL}/comments/${commentId}`, { method: 'Delete' },\n);\n\nexport const addNewComment = (postId, name, email, body) => request(\n  `${BASE_URL}/comments`,\n  {\n    method: 'POST',\n    headers: {\n      'Content-type': 'application/json; charset=UTF-8',\n    },\n    body: JSON.stringify({\n      postId,\n      name,\n      email,\n      body,\n    }),\n  },\n);\n","import { BASE_URL, request } from './api';\n\nexport const getPostDetails = postId => request(`${BASE_URL}/posts/${postId}`)\n  .then(result => result.data);\n","import React from 'react';\nimport './Loader.scss';\n\nexport const Loader = () => (\n  <div className=\"Loader\">\n    <div className=\"Loader__content\" />\n  </div>\n);\n","import React, { useEffect, useState, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { NewCommentForm } from '../NewCommentForm';\nimport {\n  addNewComment,\n  getPostComments,\n  removePostComments,\n} from '../../api/comments';\nimport { getPostDetails } from '../../api/postDetails';\nimport { Loader } from '../Loader';\nimport './PostDetails.scss';\n\nexport const PostDetails = ({ postId }) => {\n  const [postDetail, setPostDetail] = useState({});\n  const [postComments, setPostComments] = useState([]);\n  const [showComments, setShowComments] = useState(true);\n  const [loadingPost, setLoadingPost] = useState(false);\n  const [loadingComment, setLoadingComment] = useState(false);\n\n  const loadPostDetails = useCallback(async() => {\n    setLoadingPost(true);\n    const loadedPostDetails = await getPostDetails(postId);\n\n    setPostDetail(loadedPostDetails);\n    setLoadingPost(false);\n  }, [postId]);\n\n  const loadPostComments = useCallback(async() => {\n    setLoadingComment(true);\n    const loadedPostComments = await getPostComments(postId);\n\n    setPostComments(loadedPostComments);\n    setLoadingComment(false);\n  }, [postId]);\n\n  useEffect(() => {\n    loadPostDetails();\n    loadPostComments();\n  }, [loadPostDetails, loadPostComments]);\n\n  const hideComments = () => {\n    setShowComments(prev => (!prev));\n  };\n\n  const removeComment = async(commentId) => {\n    await removePostComments(commentId);\n    loadPostComments();\n  };\n\n  const addComment = async(name, email, body) => {\n    setLoadingComment(true);\n    await addNewComment(postId, name, email, body);\n    const loadedPostComments = await getPostComments(postId);\n\n    setLoadingComment(false);\n    setPostComments(loadedPostComments);\n  };\n\n  return (\n    !!postId && postDetail && (\n      <div className=\"PostDetails\">\n        {loadingPost\n          ? <Loader />\n          : (\n            <>\n              <h2>Post details:</h2>\n              <section className=\"PostDetails__post\">\n                <p>{postDetail.title}</p>\n              </section>\n\n              <section className=\"PostDetails__comments\">\n                {!!postComments.length && (\n                <button type=\"button\" className=\"button\" onClick={hideComments}>\n                  {showComments\n                    ? `Hide ${postComments.length} comments`\n                    : `Show ${postComments.length} comments`\n                  }\n                </button>\n                )}\n                {loadingComment\n                  ? <Loader />\n                  : (\n                    showComments && (\n                      <div>\n                        <ul className=\"PostDetails__list\">\n                          {postComments.map(comment => (\n                            <li\n                              key={comment.id}\n                              className=\"PostDetails__list-item\"\n                            >\n                              <button\n                                type=\"button\"\n                                className=\"PostDetails__remove-button button\"\n                                onClick={() => {\n                                  removeComment(comment.id);\n                                }}\n                              >\n                                X\n                              </button>\n                              <p>{comment.body}</p>\n                            </li>\n                          ))}\n                        </ul>\n                      </div>\n                    ))}\n\n              </section>\n\n              <section>\n                <div className=\"PostDetails__form-wrapper\">\n                  <NewCommentForm addComment={addComment} />\n                </div>\n              </section>\n            </>\n          )}\n\n      </div>\n    )\n  );\n};\n\nPostDetails.propTypes = {\n  postId: PropTypes.number.isRequired,\n};\n","import { BASE_URL, request } from './api';\n\nexport const getAllPosts = () => request(`${BASE_URL}/posts`)\n  .then(result => result.data);\n\nexport const getUserPosts = userId => getAllPosts()\n  .then(result => result.filter(post => post.userId === userId));\n","import React, { useEffect, useState } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\nimport { getAllPosts, getUserPosts } from './api/posts';\nimport { Loader } from './components/Loader';\n\nconst App = () => {\n  const [posts, setPosts] = useState([]);\n  const [userSelected, setUser] = useState(0);\n  const [selectedPostId, setSelectedPostId] = useState(0);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (!userSelected) {\n      loadAllPosts();\n\n      return;\n    }\n\n    loadUserPosts(userSelected);\n  }, [userSelected]);\n\n  const loadAllPosts = async() => {\n    setLoading(true);\n    const loadedPosts = await getAllPosts();\n\n    setLoading(false);\n    setPosts(loadedPosts);\n  };\n\n  const loadUserPosts = async(userId) => {\n    setLoading(true);\n    const loadedPosts = await getUserPosts(userId);\n\n    setLoading(false);\n    setPosts(loadedPosts);\n  };\n\n  const handleChange = (e) => {\n    const { value } = e.target;\n\n    setUser(+value);\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App__header\">\n        <label>\n          Select a user: &nbsp;\n\n          <select\n            className=\"App__user-selector\"\n            value={userSelected}\n            onChange={handleChange}\n          >\n            <option value=\"0\">All users</option>\n            <option value=\"1\">Leanne Graham</option>\n            <option value=\"2\">Ervin Howell</option>\n            <option value=\"3\">Clementine Bauch</option>\n            <option value=\"4\">Patricia Lebsack</option>\n            <option value=\"5\">Chelsey Dietrich</option>\n            <option value=\"6\">Mrs. Dennis Schulist</option>\n            <option value=\"7\">Kurtis Weissnat</option>\n            <option value=\"8\">Nicholas Runolfsdottir V</option>\n            <option value=\"9\">Glenna Reichert</option>\n            <option value=\"10\">Leanne Graham</option>\n          </select>\n        </label>\n      </header>\n\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          {loading\n            ? <Loader />\n            : (\n              <PostsList\n                posts={posts}\n                setPostId={setSelectedPostId}\n                postId={selectedPostId}\n              />\n            )\n          }\n        </div>\n\n        <div className=\"App__content\">\n          <PostDetails postId={selectedPostId} />\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}